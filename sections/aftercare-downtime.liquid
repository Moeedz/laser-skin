{% comment %}
  Aftercare & Downtime Section
  - Heading + subheading (dynamic with product title)
  - Two-column layout: After Treatment / Aftercare Guidance
  - Check icon list items via blocks
  - Bottom note text
  - Fully customizable from section settings
{% endcomment %}

<style>
  .aftercare-section {
    max-width: {{ section.settings.section_width }}px;
    margin: 0 auto;
    padding: {{ section.settings.padding_top }}px {{ section.settings.padding_side }}px {{ section.settings.padding_bottom }}px;
    background: {{ section.settings.background_color }};
  }

  .aftercare-inner {
    max-width: {{ section.settings.content_max_width }}px;
    margin: 0 auto;
  }

  /* Heading */
  .aftercare-heading {
    text-align: center;
    font-size: {{ section.settings.heading_font_size }}px;
    font-weight: {{ section.settings.heading_font_weight }};
    color: {{ section.settings.heading_color }};
    margin: 0 0 16px 0;
    line-height: 1.3;
  }

  .aftercare-subheading {
    text-align: center;
    font-size: {{ section.settings.subheading_font_size }}px;
    color: {{ section.settings.subheading_color }};
    margin: 0 0 48px 0;
    line-height: 1.6;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Two Column Grid */
  .aftercare-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: {{ section.settings.column_gap }}px;
    margin-bottom: 48px;
  }

  .aftercare-column {
    padding: 0 {{ section.settings.column_padding }}px;
  }

  .aftercare-column:first-child {
    border-right: {{ section.settings.divider_width }}px {{ section.settings.divider_style }} {{ section.settings.divider_color }};
  }

  .aftercare-column-title {
    font-size: {{ section.settings.column_title_font_size }}px;
    font-weight: {{ section.settings.column_title_font_weight }};
    color: {{ section.settings.column_title_color }};
    margin: 0 0 20px 0;
    line-height: 1.3;
  }

  .aftercare-column-title::after {
    content: '';
    display: block;
    width: 60px;
    height: 1px;
    border-top: 1px dotted {{ section.settings.column_title_underline_color }};
    margin-top: 10px;
  }

  /* Check Items */
  .aftercare-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 18px;
  }

  .aftercare-item:last-child {
    margin-bottom: 0;
  }

  .aftercare-check {
    flex-shrink: 0;
    width: {{ section.settings.check_size }}px;
    height: {{ section.settings.check_size }}px;
    color: {{ section.settings.check_color }};
    margin-top: 2px;
  }

  .aftercare-item-text {
    font-size: {{ section.settings.item_font_size }}px;
    color: {{ section.settings.item_text_color }};
    line-height: 1.6;
  }

  /* Bottom Note */
  .aftercare-note {
    text-align: center;
    font-size: {{ section.settings.note_font_size }}px;
    color: {{ section.settings.note_color }};
    font-style: {{ section.settings.note_font_style }};
    line-height: 1.6;
    max-width: 700px;
    margin: 0 auto;
    padding-top: 32px;
    border-top: 1px solid {{ section.settings.note_border_color }};
  }

  /* Responsive */
  @media screen and (max-width: 768px) {
    .aftercare-section {
      padding: 40px 20px;
    }

    .aftercare-grid {
      grid-template-columns: 1fr;
      gap: 36px;
    }

    .aftercare-column:first-child {
      border-right: none;
      border-bottom: {{ section.settings.divider_width }}px {{ section.settings.divider_style }} {{ section.settings.divider_color }};
      padding-bottom: 36px;
    }

    .aftercare-column {
      padding: 0;
    }

    .aftercare-heading {
      font-size: {{ section.settings.heading_font_size | times: 0.8 | round }}px;
    }

    .aftercare-subheading {
      font-size: {{ section.settings.subheading_font_size | times: 0.92 | round }}px;
      margin-bottom: 36px;
    }
  }
</style>

<section class="aftercare-section">
  <div class="aftercare-inner">

    {% comment %} Heading {% endcomment %}
    {% if section.settings.heading != blank %}
      <h2 class="aftercare-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if section.settings.subheading != blank %}
      {%- liquid
        if product.title != blank
          assign sub_text = section.settings.subheading | replace: '[treatment]', product.title
        else
          assign sub_text = section.settings.subheading | replace: '[treatment]', section.settings.default_treatment_name
        endif
      -%}
      <p class="aftercare-subheading">{{ sub_text }}</p>
    {% endif %}

    {% comment %} Two Column Grid {% endcomment %}
    <div class="aftercare-grid">

      {% comment %} Left Column: After Treatment {% endcomment %}
      <div class="aftercare-column">
        {% if section.settings.left_title != blank %}
          <h3 class="aftercare-column-title">{{ section.settings.left_title }}</h3>
        {% endif %}
        {% for block in section.blocks %}
          {% if block.type == 'left_item' %}
            <div class="aftercare-item" {{ block.shopify_attributes }}>
              <svg class="aftercare-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="aftercare-item-text">{{ block.settings.text }}</span>
            </div>
          {% endif %}
        {% endfor %}
      </div>

      {% comment %} Right Column: Aftercare Guidance {% endcomment %}
      <div class="aftercare-column">
        {% if section.settings.right_title != blank %}
          <h3 class="aftercare-column-title">{{ section.settings.right_title }}</h3>
        {% endif %}
        {% for block in section.blocks %}
          {% if block.type == 'right_item' %}
            <div class="aftercare-item" {{ block.shopify_attributes }}>
              <svg class="aftercare-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              <span class="aftercare-item-text">{{ block.settings.text }}</span>
            </div>
          {% endif %}
        {% endfor %}
      </div>

    </div>

    {% comment %} Bottom Note {% endcomment %}
    {% if section.settings.bottom_note != blank %}
      <p class="aftercare-note">{{ section.settings.bottom_note }}</p>
    {% endif %}

  </div>
</section>

{% schema %}
{
  "name": "Aftercare & Downtime",
  "tag": "section",
  "class": "aftercare-wrapper",
  "settings": [
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "range",
      "id": "section_width",
      "label": "Section Width",
      "min": 800,
      "max": 1600,
      "step": 50,
      "default": 1400,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "content_max_width",
      "label": "Content Max Width",
      "min": 600,
      "max": 1200,
      "step": 50,
      "default": 1000,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Top Padding",
      "min": 0,
      "max": 120,
      "step": 5,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Bottom Padding",
      "min": 0,
      "max": 120,
      "step": 5,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_side",
      "label": "Side Padding",
      "min": 15,
      "max": 60,
      "step": 5,
      "default": 20,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8ece8"
    },
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Aftercare & Downtime"
    },
    {
      "type": "range",
      "id": "heading_font_size",
      "label": "Heading Font Size",
      "min": 24,
      "max": 48,
      "step": 2,
      "default": 36,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "heading_font_weight",
      "label": "Heading Font Weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi Bold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "400"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading Color",
      "default": "#3d1f1f"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Learn how to care for your skin after [treatment] and what to expect during recovery.",
      "info": "Use [treatment] to dynamically insert the product title."
    },
    {
      "type": "range",
      "id": "subheading_font_size",
      "label": "Subheading Font Size",
      "min": 13,
      "max": 20,
      "step": 1,
      "default": 16,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color",
      "default": "#5a3a3a"
    },
    {
      "type": "text",
      "id": "default_treatment_name",
      "label": "Default Treatment Name",
      "default": "your treatment",
      "info": "Used when [treatment] placeholder is on non-product pages"
    },
    {
      "type": "header",
      "content": "Columns"
    },
    {
      "type": "text",
      "id": "left_title",
      "label": "Left Column Title",
      "default": "After treatment"
    },
    {
      "type": "text",
      "id": "right_title",
      "label": "Right Column Title",
      "default": "Aftercare guidance"
    },
    {
      "type": "range",
      "id": "column_title_font_size",
      "label": "Column Title Font Size",
      "min": 16,
      "max": 30,
      "step": 1,
      "default": 22,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "column_title_font_weight",
      "label": "Column Title Font Weight",
      "options": [
        { "value": "400", "label": "Normal" },
        { "value": "500", "label": "Medium" },
        { "value": "600", "label": "Semi Bold" },
        { "value": "700", "label": "Bold" }
      ],
      "default": "600"
    },
    {
      "type": "color",
      "id": "column_title_color",
      "label": "Column Title Color",
      "default": "#3d1f1f"
    },
    {
      "type": "color",
      "id": "column_title_underline_color",
      "label": "Title Dotted Underline Color",
      "default": "#a07070"
    },
    {
      "type": "range",
      "id": "column_gap",
      "label": "Column Gap",
      "min": 20,
      "max": 80,
      "step": 5,
      "default": 40,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "column_padding",
      "label": "Column Inner Padding",
      "min": 0,
      "max": 40,
      "step": 5,
      "default": 15,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Column Divider"
    },
    {
      "type": "range",
      "id": "divider_width",
      "label": "Divider Width",
      "min": 0,
      "max": 3,
      "step": 1,
      "default": 1,
      "unit": "px"
    },
    {
      "type": "select",
      "id": "divider_style",
      "label": "Divider Style",
      "options": [
        { "value": "solid", "label": "Solid" },
        { "value": "dashed", "label": "Dashed" },
        { "value": "dotted", "label": "Dotted" }
      ],
      "default": "solid"
    },
    {
      "type": "color",
      "id": "divider_color",
      "label": "Divider Color",
      "default": "#d4a8a8"
    },
    {
      "type": "header",
      "content": "Check Items"
    },
    {
      "type": "range",
      "id": "check_size",
      "label": "Check Icon Size",
      "min": 16,
      "max": 28,
      "step": 1,
      "default": 22,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "check_color",
      "label": "Check Icon Color",
      "default": "#8a6060"
    },
    {
      "type": "range",
      "id": "item_font_size",
      "label": "Item Font Size",
      "min": 13,
      "max": 18,
      "step": 1,
      "default": 15,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "item_text_color",
      "label": "Item Text Color",
      "default": "#3d1f1f"
    },
    {
      "type": "header",
      "content": "Bottom Note"
    },
    {
      "type": "textarea",
      "id": "bottom_note",
      "label": "Bottom Note",
      "default": "While downtime is minimal, proper aftercare ensures best results and supports skin recovery."
    },
    {
      "type": "range",
      "id": "note_font_size",
      "label": "Note Font Size",
      "min": 13,
      "max": 18,
      "step": 1,
      "default": 15,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "note_color",
      "label": "Note Text Color",
      "default": "#5a3a3a"
    },
    {
      "type": "select",
      "id": "note_font_style",
      "label": "Note Font Style",
      "options": [
        { "value": "normal", "label": "Normal" },
        { "value": "italic", "label": "Italic" }
      ],
      "default": "italic"
    },
    {
      "type": "color",
      "id": "note_border_color",
      "label": "Note Top Border Color",
      "default": "#d4a8a8"
    }
  ],
  "blocks": [
    {
      "type": "left_item",
      "name": "After Treatment Item",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Mild redness and swelling are normal within the first 24 hours and typically subside quickly."
        }
      ]
    },
    {
      "type": "right_item",
      "name": "Aftercare Guidance Item",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Avoid excessive heat, workouts, saunas, or intense sun exposure for the first 24 hours."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Aftercare & Downtime",
      "blocks": [
        {
          "type": "left_item",
          "settings": {
            "text": "Mild redness and swelling are normal within the first 24 hours and typically subside quickly."
          }
        },
        {
          "type": "left_item",
          "settings": {
            "text": "Most people resume normal activities within a day."
          }
        },
        {
          "type": "left_item",
          "settings": {
            "text": "Makeup can usually be applied after 24 hours as skin begins to calm and recover."
          }
        },
        {
          "type": "right_item",
          "settings": {
            "text": "Avoid excessive heat, workouts, saunas, or intense sun exposure for the first 24 hours."
          }
        },
        {
          "type": "right_item",
          "settings": {
            "text": "Wear SPF daily, minimum 30+ on treated areas to protect and prolong the results."
          }
        },
        {
          "type": "right_item",
          "settings": {
            "text": "Use gentle skincare products and follow any specific aftercare advice from your practitioner."
          }
        },
        {
          "type": "right_item",
          "settings": {
            "text": "Keep skin moisturised and hydrated for optimal healing."
          }
        }
      ]
    }
  ]
}
{% endschema %}
